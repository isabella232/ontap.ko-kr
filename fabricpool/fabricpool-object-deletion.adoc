---
permalink: fabricpool/fabricpool-object-deletion.html 
sidebar: sidebar 
keywords: fabricpool, fabric pool, tiering, delete, defrag, unreclaimed, threshold 
summary: FabricPool 개체의 특정 블록 비율이 ONTAP에서 더 이상 참조되지 않으면 개체가 삭제됩니다. 
---
= FabricPool 개체 삭제 및 조각 모음
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
FabricPool는 연결된 오브젝트 저장소에서 블록을 삭제하지 않습니다. 대신, FabricPool는 개체의 특정 블록 비율이 더 이상 ONTAP에서 참조되지 않으면 개체를 삭제합니다.

예를 들어, Amazon S3로 계층화된 4MB 오브젝트에 1,024개의 4KB 블록이 있습니다. 조각 모음 및 삭제는 ONTAP에서 참조되는 4KB 블록 205개(1,024개 중 20%)가 될 때까지 발생하지 않습니다. 충분한(1,024) 블록에 참조가 없으면 원래 4MB 개체가 삭제되고 새 개체가 만들어집니다.

회수되지 않은 공간 임계값 비율을 사용자 지정하고 오브젝트 저장소마다 다른 기본 수준으로 설정할 수 있습니다. 기본 설정은 다음과 같습니다.

|===


| 오브젝트 저장소 | ONTAP 9.3 및 이전 버전 | ONTAP 9.4 - 9.7 | ONTAP 9.8 이상 | Cloud Volumes ONTAP 


 a| 
Amazon S3
 a| 
0%
 a| 
20%
 a| 
20%
 a| 
30%



 a| 
Google 클라우드 스토리지
 a| 
해당 없음
 a| 
12%
 a| 
20%
 a| 
35%



 a| 
Microsoft Azure Blob 저장소
 a| 
해당 없음
 a| 
15%
 a| 
25%
 a| 
35%



 a| 
NetApp ONTAP S3를 참조하십시오
 a| 
해당 없음
 a| 
해당 없음
 a| 
40%
 a| 
해당 없음



 a| 
NetApp StorageGRID를 참조하십시오
 a| 
0%
 a| 
40%
 a| 
40%
 a| 
해당 없음

|===


== 재확보된 공간 임계값입니다

재확보되지 않은 기본 공간 임계값 설정을 변경하면 허용되는 개체 조각화 양이 증가하거나 줄어듭니다. 조각화를 줄이면 추가 오브젝트 저장소 리소스(읽기 및 쓰기)를 희생하면서 클라우드 계층에서 사용하는 물리적 용량이 줄어듭니다.



=== 임계값 감소

추가 비용을 방지하려면 스토리지 비용은 줄이고 읽기 비용은 높이는 오브젝트 저장소 가격 체계를 사용할 때 회수되지 않는 공간 임계값을 줄이는 것이 좋습니다. Amazon의 Standard-IA 및 Azure Blob Storage의 Cool을 예로 들 수 있습니다.

예를 들어, 법적 이유로 저장된 10년 된 프로젝트의 볼륨을 계층화하면 표준 가격 체계를 사용하는 경우보다 Standard-IA 또는 Cool과 같은 가격 체계를 사용하는 데 비용이 적게 들 수 있습니다. 이러한 볼륨에서 읽기는 개체 조각 모음에 필요한 읽기를 포함하여 비용이 더 많이 들지만 자주 발생할 가능성은 낮습니다.



=== 임계값이 증가합니다

또는 객체 조각화로 인해 ONTAP에서 참조하는 데이터에 필요한 것보다 훨씬 더 많은 오브젝트 저장소 용량을 사용할 경우 재확보되지 않은 공간 임계값을 늘리는 것이 좋습니다. 예를 들어, 모든 오브젝트가 최대 허용 익스텐트로 균등하게 분할되는 최악의 경우 20%의 재확보된 공간 임계값을 사용하면 클라우드 계층의 총 용량의 80%가 ONTAP에서 참조하지 않을 수 있습니다. 예를 들면 다음과 같습니다.

ONTAP + ONTAP에서 참조하지 않는 8TB = 클라우드 계층에서 사용하는 총 10TB 용량

이 경우 재확보된 공간 임계값을 높이거나 볼륨 최소 냉각 날짜를 늘려서 참조되지 않은 블록이 사용하는 용량을 줄이는 것이 유리할 수 있습니다.

[NOTE]
====
객체의 조각 모음 및 스토리지 효율성이 향상됨에 따라 참조된 블록이 새로운 보다 효율적인 객체에 기록될 때 기본 파일이 더욱 조각화될 수 있습니다. 이런 이유로 재확보된 공간 임계값을 크게 늘리면 객체 스토리지의 효율성이 향상되지만 순차적 읽기 성능은 감소할 수 있습니다.

====


== 재확보된 공간 임계값을 변경합니다

여러 오브젝트 저장소에 대해 재확보된 공간 임계값 비율을 사용자 지정할 수 있습니다.

.시작하기 전에
고급 권한 수준이 필요합니다.

.단계
. 재확보되지 않은 기본 공간 임계값을 변경하려면 다음 명령을 사용자 지정하고 실행합니다.
+
[source, cli]
----
storage aggregate object-store modify -aggregate <name> -object-store-name <name> -unreclaimedspace-threshold <%> (0%-99%)
----

